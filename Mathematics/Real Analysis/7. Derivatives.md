# Definition of Derivatives
If $f$ is a function defined at some $a\in\mathbb{R}$, then if $$\lim_{ x \to a } \frac{f(x)-f(a)}{x-a}$$exists, we say that $f$ is differentiable at $a$ (i.e. derivative exists at $a$), call it $f'(a)$
- Note that this function is not defined at $a$

## Example)
Let $f(x)=x^{2}$ what is $f'(3)$?
$$\lim_{ x \to 3 }\frac{f(x)-f(3)}{x-3}=\lim_{ x \to 3 }\frac{x^{2}-9}{x-3}=\lim_{ x \to 3 }\frac{(x+3)(x-3)}{x-3}=\lim_{ x \to 3 } (x+3)=6$$

## Example)
Let $f(x)=\large\{^{x^{2}\text{ (if }x\geq0)}_{0 \text{ (if }x<0)}$. Does $f'(0)$ exists?
$$\lim_{ x \to 0 } \frac{f(x)-f(0)}{x-0}=\lim_{ x \to 0 } \frac{f(x)-0}{x-0}=\lim_{ x \to 0 } \frac{f(x)}{x}$$

To find this let's consider RH limit and LH limit separately.

i) LH
$$\lim_{ x \to 0^{-} } \frac{f(x)}{x}=\lim_{ x \to 0 } \frac{0}{x}=0$$
ii) RH
$$\lim_{ x \to 0^{+} }\frac{f(x)}{x}=\lim_{ x \to 0^{+} }\frac{x^{2}}{x}=\lim_{ x \to 0^{+} } x=0  $$

Since RH and LH leads to the same limit value, $\lim_{ x \to 0 }\frac{f(x)}{x}=0$, $f'(0)$ exists and equals to 0

## Example)
Let $f(x)=|x|$. Does $f'(0)$ exists?

$$\lim_{ x \to 0 } \frac{f(x)-f(0)}{x-0}=\lim_{ x \to 0 } \frac{f(x)-0}{x-0}=\lim_{ x \to 0 } \frac{f(x)}{x}$$

To find this let's consider RH limit and LH limit separately.

i) LH
$$\lim_{ x \to 0^{-} } \frac{f(x)}{x}=\lim_{ x \to 0 } \frac{-x}{x}=-1$$
ii) RH
$$\lim_{ x \to 0^{+} }\frac{f(x)}{x}=\lim_{ x \to 0^{+} }\frac{x}{x}=1  $$

Since RH and LH does not lead to the same limit value, $\lim_{ x \to 0 }\frac{f(x)}{x}$ does not exists, thus $f'(0)$ does not exist

# Prop 51. If $f$ is differentiable at $a$, then $f$ is continuous at $a$
(Note that this is one-way implication)

We know $\lim_{ x \to a }\frac{f(x)-f(a)}{x-a}$ exists, we want $\lim_{ x \to a }f(x)=f(a)$
	
Consider $\lim_{ x \to a }f(x)-f(a)$
- We want to prove this exsits and equals to 0
- $=\lim_{ x \to a }\frac{f(x)-f(a)}{x-a}\cdot(x-a)$

Since $\lim_{ x \to a }\frac{f(x)-f(a)}{x-a}$ and $\lim_{ x \to a }(x-a)$ both exist, by Arithmetic Theorem of Function Limit, their product exists
- $\lim_{ x \to a }(f(x)-f(a))$ exists

Furthermore,  $\lim_{ x \to a }\frac{f(x)-f(a)}{x-a}\cdot(x-a)=\lim_{ x \to a }\frac{f(x)-f(a)}{x-a}\cdot\lim_{ x \to a }(x-a)=f'(a)\cdot(a-a)=f'(a)\cdot 0=0$
- Since $\lim_{ x \to a }(f(x)-f(a))=0$, $\lim_{ x \to a }f(x)=f(a)$

# Chain Rule
$$(g\circ f)'(a)=g'(f(a))f'(a)$$

$(g\circ f)'(a)=\lim_{ x \to a }\frac{g(f(x))-g(f(a))}{x-a}$

$g'(f(a))f'(a)=\left( \lim_{ x \to f(a) }\frac{g(x)-g(f(a))}{x-f(a)} \right)\left( \lim_{ x \to a }\frac{f(x)-f(a)}{x-a} \right)$

Unfortunately, we can't directly prove from definition immediately. Let's consider following theorem

## Thm 56. Derivative Existence Theorem (Caratheodory's Theorem)
Suppose $f$ is defined at some $a\in\mathbb{R}$. Then $f$ is differentiable at $a$ iff there exists some function $S$ which has two properties
1. $\forall \text{ }x\neq a$, $S(x)(x-a)=f(x)-f(a)$
2. $S$ is cts at $a$
In this case, $f'(a)=S(a)$

### Example)
Suppose we want to find $f'(3)$ when $f(x)=x^{2}$
Consider $f(x)-f(a)=x^{2}-9=(x-3)(x+3)$
- $x+3$ could be $S(x)$, is this function cts at 3?
	- Yes

Then, by Derivative Existence Theorem, $f'(3)$ exists and equals to $3+3=6$

### Forward Direction)
Suppose $f$ is differentiable at $a$
Define $S(x)$ to be
$$S(x)=\large\{^{\frac{f(x)-f(a)}{x-a}\text{ if }x\neq a}_{f'(a)\text{ if }x=a} $$
By definition, if $x \neq a$ $S(x)(x-a)=f(x)-f(a)$
- So, $S$ satisfies 1.

Consider $\lim_{ x \to a }S(x) = \lim_{ x \to a }\frac{f(x)-f(a)}{x-a}=f'(a)=S(a)$
- Thus, indeed $S$ is continuous at $a$

### Backward Direction)
Assume such an $S$ exists
By 1. for $x\neq a$, since $S(x)(x-a)=f(x)-f(a)$
- $S(x)=\frac{f(x)-f(a)}{x-a}$

Then, $\lim_{ x \to a }\frac{f(x)-f(a)}{x-a}=\lim_{ x \to a }S(x)$

Since $S$ is continuous by 2. 
- $\lim_{ x \to a }S(x)=S(a)$

So, $\lim_{ x \to a }\frac{f(x)-f(a)}{x-a}$ does exists and equals $S(a)$

## Prove using DET
Suppose $f,g$ are differentiable at $a$, and we want to show that $f+g$ is differentiable at $a$

By forward direction of DET, there are functions $S,T$ so that 
- $\forall \text{ }x\neq a$, $S(x)(x-a)=f(x)-f(a)$ and $T(x)(x-a)=g(x)-g(a)$
- $S,T$ are cts at $a$, thus $S(a)=f'(a)$ and $T(a)=g'(a)$

Consider $(f+g)(x)-(f+g)(a)$
$$=f(x)+g(x)-f(a)-g(a)$$
$$=S(x)(x-a)+T(x)(x-a)=(x-a)(S(x)+T(x))$$
- $S(x)+T(x)$ is cts by Continuity Arithmetic Theorem

Then, $S(x)+T(x)$ satisfies 1. and 2. for the DET for $f+g$ at $a$
- So, $(f+g)(a)$ exists and equals to $S(a)+T(a)=  f'(a)+g'(a)$ by DET

## Prop 57. Chain Rule
If $f$ is differentiable at $a$ and $g$ is differentiable at $f(a)$, then $g\circ f$ is differentiable at $a$ and
$$(g\circ f)'(a)=g'(f(a))f'(a)$$

**Proof)**
By DET forward direction, there exist functions $S,T$ so that
1. $\forall \text{ }x\neq a$, $S(x)(x-a)=f(x)-f(a)$, $S$ is cts at $a$  and $S(a)=f'(a)$
2.  $\forall \text{ }y\neq f(a)$, $T(y)(y-f(a))=g(y)-g(f(a))$, $T$ is cts at $f(a)$, $T(f(a))=g'(f(a))$

Consider $g(f(x))-g(f(a))$
$$=T(f(x))(f(x)-f(a))$$
by substitute $y=f(x)$ to 2.
$$T(f(x))S(x)(x-a)$$
by 1.

Then, is $T(f(x))S(x)$ cts at $a$?
- $S(x)$ is cts at $a$ by 1
- $f$ is differentiable at $a$ and $T$ is cts at $f(a)$, by [[6. Continuous Function#Prop 46. Composite Function Continuity|Prop 46(Composite Function Continuity)]], $T(f(x))$ is cts at $a$

So by the Continuity Arithmetic Theorem, $T(f(x))S(x)$ is cts at $a$

So by DET, $g\circ f$ is differentiable at $a$, and also
$$g\circ f'(a)=[T(f(x))S(x)](a)=T(f(a))S(a)=g'(f(a))f'(a)$$