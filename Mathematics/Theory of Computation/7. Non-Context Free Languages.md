# Pumping Lemma for CFG
If $A$ is a context-free language, then there is a number $p$ (the pumping length) where, if $s$ is any string in $A$ of length at least $p$, then $s$ may be divided into five pieces $s = uvxyz$ satisfying the conditions  
1. for each $i \geq 0$, $uv^i xy^iz \in A$
2. $|vy| > 0$
	- Either $v$ or $y$ is not the empty string
3. $|vxy| \leq p$
	- Pieces $v,x$ and $y$ together hae length at most $p$

Any sufficiently long string $s$ in $A$ can be pumped and remain in $A$

## Proof
**Idea)**
Let $A$ be a CFL and $G$ be a CFG that generates it
- Let $s$ be very long string in $A$

Consider the parse tree for $s$
- Then, it must contain some long path from the start variable at the root to one of the terminal symbol at a leaf
- On this long path, some variable $R$ must repeat because of pigeonhole principle
- Let's cut $s$ into five pieces $uvxyz$ as follows
![[Pasted image 20250301191020.png|300]]

Then, we can draw parse three for $uv^{i}xy^{i}z$ for any $i\geq0$
![[Pasted image 20250301191229.png]]

**Formal Proof)**
Let $G$ be a CFG for CFL $A$. Let $b$ be the maximum number of symbols in the right-hand side of a rule (assume at least 2). 

Observe that a node can have no more than $b$ children. 
- At most $b$ leaves are 1 step from the start variable; at most $b^2$ leaves are within 2 steps of the start variable; and at most $b^h$ leaves are within $h$ steps of the start variable. 
- So, if the height of the parse tree is at most $h$, the length of the string generated is at most $b^h$. 
- Conversely, if a generated string is at least $b^h + 1$ long, each of its parse trees must be at least $h + 1$ high.

Say $|V|$ is the number of variables in $G$. 

We set $p=b^{|V|+1}$. 
- Now if $s$ is a string in $A$ and its length is $p$ or more, its parse tree must be at least $|V| + 1$ high, because $b^{|V|+1} \geq b^{|V|} + 1$.

To see how to pump any such string $s$, let $\tau$ be one of its parse trees. If $s$ has several parse trees, choose $\tau$ to be a parse tree that has the smallest number of nodes. We know that $\tau$ must be at least $|V| + 1$ high, so its longest path from the root to a leaf has length at least $|V| + 1$. That path has at least $|V| + 2$ nodes; one at a terminal, the others at variables. Hence that path has at least $|V| + 1$ variables. With $G$ having only $|V|$ variables, some variable $R$ appears more than once on that path. For convenience later, we select $R$ to be a variable that repeats among the lowest $|V| + 1$ variables on this path.

We divide $s$ into $wxyz$ according to Figure 2.35. Each occurrence of $R$ has a subtree under it, generating a part of the string $s$. The upper occurrence of $R$ has a larger subtree and generates $vxy$, whereas the lower occurrence generates just $x$ with a smaller subtree. Both of these subtrees are generated by the same variable, so we may substitute one for the other and still obtain a valid parse tree. Replacing the smaller by the larger repeatedly gives parse trees for the strings $w^i xy^i z$ at each $i > 1$. Replacing the larger by the smaller generates the string $uxz$. That establishes condition 1 of the lemma. We now turn to conditions 2 and 3.

To get condition 2, we must be sure that $v$ and $y$ are not both $e$. If they were, the parse tree obtained by substituting the smaller subtree for the larger would have fewer nodes than $\tau$ does and would still generate $s$. This result isnâ€™t possible because we had already chosen $\tau$ to be a parse tree for $s$ with the smallest number of nodes. That is the reason for selecting $\tau$ in this way.

In order to get condition 3, we need to be sure that $vxy$ has length at most $p$. In the parse tree for $s$ the upper occurrence of $R$ generates $vxy$. We chose $R$ so that both occurrences fall within the bottom $|V| + 1$ variables on the path, and we chose the longest path in the parse tree, so the subtree where $R$ generates $vxy$ is at most $|V| + 1$ high. A tree of this height can generate a string of length at most $b^{|V|+1} = p$.

\end{document}








