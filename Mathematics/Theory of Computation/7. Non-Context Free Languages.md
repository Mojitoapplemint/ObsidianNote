# Pumping Lemma for CFG
If $A$ is a context-free language, then there is a number $p$ (the pumping length) where, if $s$ is any string in $A$ of length at least $p$, then $s$ may be divided into five pieces $s = uvxyz$ satisfying the conditions  
1. for each $i \geq 0$, $uv^i xy^iz \in A$
2. $|vy| > 0$
	- Either $v$ or $y$ is not the empty string
3. $|vxy| \leq p$
	- Pieces $v,x$ and $y$ together hae length at most $p$

Any sufficiently long string $s$ in $A$ can be pumped and remain in $A$

## Proof
**Idea)**
Let $A$ be a CFL and $G$ be a CFG that generates it
- Let $s$ be very long string in $A$

Consider the parse tree for $s$
- Then, it must contain some long path from the start variable at the root to one of the terminal symbol at a leaf
- On this long path, some variable $R$ must repeat because of pigeonhole principle
- Let's cut $s$ into five pieces $uvxyz$ as follows
![[Pasted image 20250301191020.png|300]]

Then, we can draw parse three for $uv^{i}xy^{i}z$ for any $i\geq0$
![[Pasted image 20250301191229.png]]

**Formal Proof)**
Let $G$ be a CFG for CFL $A$. Let $b$ be the maximum number of symbols in the right-hand side of a rule (assume at least 2). 

Observe that a node can have no more than $b$ children. 
- At most $b$ leaves are 1 step from the start variable; at most $b^2$ leaves are within 2 steps of the start variable; and at most $b^h$ leaves are within $h$ steps of the start variable. 
- So, if the height of the parse tree is at most $h$, the length of the string generated is at most $b^h$. 
- Conversely, if a generated string is at least $b^h + 1$ long, each of its parse trees must be at least $h + 1$ high.

Say $|V|$ is the number of variables in $G$. 

We set $p=b^{|V|+1}$. 
- If $\text{(length of }s)\geq p= b^{|V|+1}$, since $b^{|V|+1} \geq b^{|V|} + 1$, length of $s$ is at least $b^{|V|}+1$. Thus, the parse tree must be at least $|V|+1$ high

To see how to pump any such string $s$, let $\tau$ be one of its parse trees. 
- If $s$ has several parse trees, choose $\tau$ to be a parse tree that *has the smallest number of nodes.* 

We know that $\tau$ must be at least $|V| + 1$ high, so its longest path from the root to a leaf has length at least $|V| + 1$. 
- That path has at least $|V| + 2$ nodes; one at a terminal, the others at variables. 
- Hence that path has at least $|V| + 1$ variables. 
- With $G$ having only $|V|$ variables, some variable $R$ appears more than once on that path. 
	- For convenience later, we select $R$ to be a variable that repeats among the lowest $|V| + 1$ variables on this path.

We divide $s$ into $wxyz$ according to 
![[Pasted image 20250301191020.png|300]]

Each occurrence of $R$ has a subtree under it, generating a part of the string $s$. 
- The upper occurrence of $R$ has a larger subtree and generates $vxy$,
- The lower occurrence generates just $x$ with a smaller subtree. 

Both of these subtrees are generated by the same variable, so we may substitute one for the other and still obtain a valid parse tree. 
- Replacing the smaller by the larger repeatedly gives parse trees for the strings $uv^i xy^i z$ at each $i > 1$. 
- Replacing the larger by the smaller generates the string $uxz$. 
![[Pasted image 20250301191229.png]]
- That establishes condition 1 of the lemma.

To get condition 2, we must be sure that $v$ and $y$ are not both $\varepsilon$. 
- If they were, then $s=uxz$. Thus, the parse tree obtained by substituting the smaller subtree for the larger would have fewer nodes than $\tau$ does and would still generate $s$
- This result isnâ€™t possible because we had already chosen $\tau$ to be a parse tree for $s$ with the smallest number of nodes. That is the reason for selecting $\tau$ in this way.

In order to get condition 3, we need to be sure that $vxy$ has length at most $p$. 
- In the parse tree for $s$ the upper occurrence of $R$ generates $vxy$. 
- We chose $R$ so that both occurrences fall within the bottom $|V| + 1$ variables on the path, and we chose the longest path in the parse tree, so the subtree where $R$ generates $vxy$ is at most $|V| + 1$ high. 
- A tree of this height can generate a string of length at most $b^{|V|+1} = p$.

# Prove that language is not context free
Proof by Contradiction
1. Assume that $L$ is CFL
2. Exists a pumping legth $p$ for $L$
3. Pick $w\in L$ with $|w|\geq p$
4. Look at all decomposition of $w$ into $uvxyz$ s.t $|vy|>0$ and $|vxy|\leq p$
5. Find one $i$ s.t $uv^{i}xy^{i}z\not\in L$

## Example 1: $L_{1}=\{ a^{n}b^{n}c^{n}\text{ | }n\geq 0 \}$
Suppose for contradiction, $L_{1}$ is CFL
- Then, there is a pumping length $p$

Choose $w=a^{p}\,b^{p}\,c^{p}\in L_{1}$

Look at all decompositions into $uvxyz$

Case 1: $v$ and $y$ only contain $a's$, $b's$, or $c's$
- Suppose $x,y$ only contain $a$
- If we pump up to $i=2$, then we are pumping only $a$, thus it won't have the same number of $a,b,c$
- Thus, it won't be in the language
- Similar for $b's$ and $c's$

Case 2: $v$ and $y$ only contains two of three symbols
- Since $|vxy|$ can has at most length $p$ and each symbol appears $p$ times, there is always one symbol, either $a's$ or $c's$ that is not contained in $vxy$, but in $u$ or $z$.
- Thus, if we pump for $i=2$, then either $a$ or $c$ will not matching with the rest

Note that since there are $p$ amount of $a's$, $b's$ and $c's$, it is impossible for $v,y$ to contain all three symbols, unless it won't satisfy third condition

## Example 2: $L_{2}=\{ a^{i}b^{j}c^{k} \text{ | }0\leq i\leq j\leq k \}$
Suppose for contradiction $L_{2}$ is CFL
- There is pumping length $p$

Choose $w=a^{p}\,b^{p}\,c^{p}\in L_{2}$

Look at all decompositions into $uvxyz$

Case 1: $v$ and $y$ only contain $a's$, $b's$, or $c's$
- $a's$ : Pumping for $i=2$, there are more $a's$ than $b's$ and $c's$
- $b's$ : Pumping for $i=2$ , there are more $b's$ than $c's$
- $c's$ : Pumping for $i=0$, there are less $c's$ than $a's$ and $b's$

Case 2: $v$ and $y$ only contains two of three symbols
- $a\text{ \& }b's$ : Pumping for $i=2$, there are more $b's$ than $c's$
- $b\text{ \& }c's$ : Pumping for $i=0$, there are more $a's$ than $b's$
- $a\text{ \& }c's$ : Pumping for $i=0$, there are more $b's$ than $c's$

Again, $v,y$ cannot contain all three symbols

## Example 3: $L_{3}=\{ ww\text{ | } w\in \{ 0,1 \}^{*}\}$
Suppose for contradiction $L_{3}$ is CFL
- There is pumping length $p$

Choose $w=0^{p}\,1^{p}\,0^{p}\,1^{p}$

Look at all decompositions into $uvxyz$

Case 1 : $v,y$ are only in the first half
- Then, pumping for any $i\neq 1$, new first half and second half of the string will not be the same

Case 2 : $v,y$ are not in the same side, but spreaded in the middle
- Because we have $p$ amount of $1's$ and $0's$, it is impossible for $v,y$ to contain only $0$ and $1$
- Then, pumping for any $i\neq 1$, number of $0$ or $1$ in the first half or second half will not match`